<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Practice2</title>
</head>
<body>
    <ul id="data"></ul>

    <button id="prev">prev</button>
    <nav style="display: inline-block;" id="pagination"></nav>
    <button id="next">next</button>

    <!--
    데이터가 249개 있다고 가정하고 Pagination 모듈을 만들어보자!
    페이지 순번을 클릭했을 때 각 페이지별로 10개의 데이터가 보인다. (7페이지면 61부터 70까지 보인다)
    prev 버튼을 누를경우 전 페이지의 마지막 순번으로 가며, (14번에서 prev를 누를경우 10번으로간다)
    next 버튼을 누를경우 다음 페이지의 첫 순번으로 간다. (14번에서 next를 누를경우 21번으로간다)
    해당하는 페이지가 없을 때 prev/next를 클릭하면 아무런 반응이 없어도 된다
    -->
    <script>
        var count = 249;
        var index = 1;
        var prev = document.getElementById('prev');
        var next = document.getElementById('next');


        (function(){
            createPage(1 ,10);
            createData(1, 10);
        })();


        // a 태그 생성
        function createPage(index, page, last){
            var pagination = document.getElementById('pagination');
            pagination.innerHTML='';
            for (var i = 1; i <= page; i++) {
                var a = document.createElement('a');
                a.href = '#' + (index-1)*10 + i;
                (function(){
                    var num = (index-1)*10 + i;
                    var last = 10;
                    if(num === Math.ceil(count/10)){
                        last = count - (num-1)*10;
                    }
                    a.addEventListener('click', function() { createData(num, last); });
                }());
                a.text = (index-1)*10 + i + ' ';
                pagination.append(a);
            }
        }


        // li 태그 생성
        function createData(index, last){
            var ul = document.getElementById('data');
            ul.innerHTML = '';
            for (var i = 1; i <= last; i++) {
                var li = document.createElement('li');
                li.textContent = (index - 1) * 10 + i;
                ul.appendChild(li);
            }
        };

        // prev 버튼 클릭
        prev.addEventListener('click', function(){
            if(index > 1){
                createPage(--index, 10, 10);
                createData(index*10, 10);
            }
        });

        // next 버튼 클릭
        next.addEventListener('click', function(){
            if(index < count/100 - 1) {
                createData((index* 10) + 1, 10);
                createPage(++index, 10, 10);
            }else if(index === Math.floor(count/100)){
                var page = Math.ceil((count/100 - index)*10);
                createData((index * 10) + 1, 10);
                createPage(++index, page, 10);
            }else{
                return;
            }
        });



    </script>
</body>
</html>